# Prueba T√©cnica - Front-End Developer

# üìñ Documentaci√≥n del Proyecto

## ‚öôÔ∏è Requisitos para Ejecutar el Proyecto

Tener instalado Node.js >= 18 y Yarn >= 1.22.19.

### Instalar las dependencias

Iniciar el servidor de desarrollo:

```bash
yarn install
```

Asegurarse de tener configurado correctamente el entorno de Expo.

```bash
yarn start
```

Agregar el archivo `.env` en la ra√≠z del proyecto con las variables de entorno necesarias. Usar el archivo `.env.example` como referencia (√∫nicamente tiene la variable del base URL de la API).

```bash
BASE_URL="https://api.kambista.com/v1"
```

El `.apk` generado se encuentra en el repositorio como `kambista.apk`. Para ejcutarlo, seguir los siguientes pasos:

1. Descargar el archivo `kambista.apk` en el dispositivo m√≥vil.
2. Habilitar la instalaci√≥n de aplicaciones de fuentes desconocidas en la configuraci√≥n del dispositivo.
3. Abrir el archivo `kambista.apk` y seguir las instrucciones para instalar la aplicaci√≥n.
4. Una vez instalada, abrir la aplicaci√≥n desde el men√∫ de aplicaciones del dispositivo.
5. Iniciar sesi√≥n con las credenciales de prueba:
   - **Email**: john@gmail.com
   - **Contrase√±a**: 123456

# üìö Descripci√≥n del Proyecto

## üöÄ Tecnolog√≠as Utilizadas (Principales)

| Categor√≠a     | Librer√≠as y Herramientas                     |
| ------------- | -------------------------------------------- |
| Core          | Expo SDK 52.0.46 ¬∑ React 18.3.1 ¬∑ TypeScript |
| Estado Global | Zustand ¬∑ React Query                        |
| Formularios   | React Hook Form + Yup                        |
| Estilos       | NativeWind (Tailwind CSS)                    |
| Utilidades    | Currency.js ¬∑ Day.js ¬∑ AsyncStorage          |
| C√≥digo limpio | ESLint ¬∑ Prettier                            |
| Logging       | react-native-logs                            |
| Navegaci√≥n    | Expo Router                                  |

## üèóÔ∏è Estructura y Organizaci√≥n

- **Gesti√≥n de estado global**: Se utiliz√≥ **Zustand**, estructurando el estado de forma modular para manejar datos de usuario, transacciones y tasas de cambio.
- **Validaciones**: Implementadas con **React Hook Form** y **Yup** para validaci√≥n reactiva de formularios.
- **Servicios**: Consumo de API encapsulado en **clases bajo patr√≥n Singleton**, asegurando una √∫nica instancia de los servicios y un acceso centralizado a los endpoints.
- **Formato de datos**: Se usaron **Currency.js** para formateo de montos monetarios y **Day.js** para manejo de fechas.
- **Persistencia local**: Almacenamiento de mocks y datos importantes usando **AsyncStorage**.
- **Estilizado de clases**: Creaci√≥n de una funci√≥n `cn` personalizada combinando `clsx` y `tailwind-merge`, optimizando la gesti√≥n din√°mica de clases Tailwind.

```typescript
import { clsx, type ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(...inputs));
}
```

- **Logger personalizado**: Integraci√≥n de react-native-logs para registro de eventos de la aplicaci√≥n, facilitando la depuraci√≥n.

## üß© Funcionalidades Implementadas

- **Login**: Formulario de autenticaci√≥n con validaciones en tiempo real.

- **Onboarding**: Captura de datos personales, validaciones espec√≠ficas (ej: duplicidad de DNI).

- **Conversor de Divisas**: C√°lculo din√°mico entre PEN y USD con tasas actualizadas en tiempo real mediante API simulada.

- **Creaci√≥n de Operaciones**: Flujo completo para registrar, adjuntar voucher y visualizar resumen de transacci√≥n.

- **Gesti√≥n de Cuentas Bancarias**: Agregado de cuentas con validaciones espec√≠ficas por tipo de cuenta y n√∫mero.

- **Bottom Bar Navigation**: Navegaci√≥n entre m√≥dulos principales usando barra inferior.

- **Manejo de Errores**:
  - Validaciones de formularios.
  - Captura y tratamiento de errores provenientes de APIs simuladas.

## üèõÔ∏è Organizaci√≥n del Proyecto

El proyecto se divide en m√≥dulos claros para separar responsabilidades y mantener la escalabilidad:

### Estructura Principal

```plaintext
‚îú‚îÄ‚îÄ app
|   ‚îú‚îÄ‚îÄ index.tsx
|   ‚îú‚îÄ‚îÄ _layout.tsx
‚îÇ   ‚îú‚îÄ‚îÄ (auth)
|   ‚îú‚îÄ‚îÄ (operations)
|   ‚îú‚îÄ‚îÄ (tabs)
‚îÇ
‚îú‚îÄ‚îÄ modules
‚îÇ   ‚îú‚îÄ‚îÄ auth
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ home
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ onboarding
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ transactions
‚îÇ       ‚îú‚îÄ‚îÄ components
‚îÇ       ‚îú‚îÄ‚îÄ hooks
‚îÇ       ‚îú‚îÄ‚îÄ screens
‚îÇ       ‚îú‚îÄ‚îÄ services
‚îÇ       ‚îú‚îÄ‚îÄ types
‚îÇ       ‚îî‚îÄ‚îÄ utils
‚îÇ
‚îú‚îÄ‚îÄ services
‚îÇ   ‚îú‚îÄ‚îÄ api
‚îÇ   ‚îî‚îÄ‚îÄ queryClient.ts
‚îÇ
‚îú‚îÄ‚îÄ components
‚îú‚îÄ‚îÄ hooks
‚îú‚îÄ‚îÄ types
‚îú‚îÄ‚îÄ utils
‚îú‚îÄ‚îÄ mocks
```

### üì¶ Organizaci√≥n de Servicios

Cada servicio sigue el patr√≥n **Singleton**, garantizando una √∫nica instancia activa y centralizando las llamadas a API o datos locales.

**Ejemplo de `AuthService`**:

```typescript
class AuthService {
  private static instance: AuthService;

  static getInstance() {
    if (!AuthService.instance) AuthService.instance = new AuthService();
    return AuthService.instance;
  }

  async login(email: string, password: string) {
    const users = await storageInitializer.getUsers();
    // ... Validaciones de email y contrase√±a
  }
}

export const authService = AuthService.getInstance();
```

Este patr√≥n asegura:

- Instancia √∫nica y controlada.
- Acceso uniforme a los m√©todos de servicios.

### üõ†Ô∏è Hook Personalizado para Mutations: useCustomMutation

Se cre√≥ un hook reutilizable para manejar mutations integrando autom√°ticamente la gesti√≥n de errores y toasts de error, evitando repetici√≥n de c√≥digo.

```typescript
import { useMutation } from "@tanstack/react-query";
import Toast from "react-native-toast-message";

export function useCustomMutation(mutationOptions) {
  return useMutation({
    ...mutationOptions,
    onError: (error, variables, context) => {
      Toast.show({
        type: "error",
        text1: (error as IErrorResponse)?.data?.title ?? "Error",
        text2:
          (error as IErrorResponse)?.data?.message ??
          "Ocurri√≥ un error inesperado"
      });

      if (mutationOptions.onError)
        mutationOptions.onError(error, variables, context);
    }
  });
}
```

Este hook permite:

- Centralizar manejo de errores para todas los mutations.
- Mostrar toasts autom√°ticos en caso de error.
- Reducir c√≥digo duplicado en todos los custom hooks de interacci√≥n con servicios.

**Ejemplo de uso en useGetCurrentExchange**:

```typescript
export const useGetCurrentExchange = () => {
  const mutation = useCustomMutation({
    mutationFn: () => exchangeService.getCurrentExchangeRate()
  });

  return {
    handle: mutation.mutateAsync,
    data: mutation.data,
    loading: mutation.isPending,
    error: mutation.error
  };
};
```

### ‚úÖ Beneficios de esta arquitectura

- **Escalabilidad**: F√°cil de agregar nuevos m√≥dulos y funcionalidades.
- **Mantenibilidad**: C√≥digo limpio, reutilizable y predecible.
- **Optimizaci√≥n de desarrollo**: Agiliza el manejo de errores, la validaci√≥n de formularios y la gesti√≥n de estado global.
- **Buena experiencia de usuario**: Integraci√≥n de loaders y toasts de feedback inmediato.

---

## üì± Introducci√≥n

Este reto t√©cnico consiste en desarrollar una aplicaci√≥n de conversi√≥n de divisas con autenticaci√≥n, siguiendo los dise√±os proporcionados en este [Figma](https://www.figma.com/design/0r7lOY04Vv3Ht9UJItO7yX/Prueba?node-id=0-1&node-type=canvas&t=xY3A9Vp4Xe4zmQCW-0).

### üîß Stack Tecnol√≥gico

| Categor√≠a | Tecnolog√≠as                      |
| --------- | -------------------------------- |
| Core      | Expo ¬∑ React Native ¬∑ TypeScript |
| Estilos   | NativeWind                       |
| Estado    | Zustand o Context API            |
| API       | Axios o React Query              |

## üéØ Objetivos de Evaluaci√≥n

**Calidad de c√≥digo**: Arquitectura limpia, modularizaci√≥n y buenas pr√°cticas
**Fidelidad al dise√±o**: Fidelidad y creatividad en la resoluci√≥n de los requerimientos de dise√±o
**Performance**: Componentes optimizados y manejo eficiente de estado.
**Mantenibilidad**: Prioriza legibilidad y escalabilidad, con estructura de archivos clara y consistente.

## üìã Requerimientos funcionales

### üîê M√≥dulo de Autenticaci√≥n

**Pantallas**:

- **Login**
  - Formulario para el inicio de sesi√≥n de los usuarios.
  - Validaci√≥n de campos en tiempo real

### üîê M√≥dulo de Onboarding

- **Datos personales**

  - Formulario para completar los datos personales del usuario
  - Validaci√≥n de campos en tiempo real
  - Manejo de errores espec√≠ficos (ej: DNI duplicado)

  ```json
  // Ejemplo de error en servicio
  {
    "success": false,
    "data": {
      "name": "DUPLICATE_DNI",
      "title": "DNI en uso",
      "message": "El n√∫mero de documento registrado ya est√° en uso."
    }
  }
  ```

````

- **Registro exitoso**
  - Vista para indicar que todos los datos son correctos.

### üí± M√≥dulo de Transacciones

**Pantalla principal**:

- Calculadora PEN ‚Üî USD
- Consumo de API simulada para calcular una operaci√≥n
- Consumo de API simulada para obtener datos de tipo de cambio
- Manejo de tasas de cambio din√°micas
- C√°lculos en tiempo real

**Crear una operaci√≥n**:

- Resumen de la operaci√≥n creada.
- Se deben seleccionar los bancos y el origen de fondos de acuerdo a mock anexo.

**Datos de transferencia**:

- Datos de la cuenta bancaria de Kambista.

**Adjuntar voucher de dep√≥sito**:

- Formulario para adjuntar voucher bancario del dep√≥sito efectuado.

**Transacci√≥n creada**:

- Resumen de la operaci√≥n creada.

### üí± M√≥dulo de Cuentas bancarias

**Agregar cuenta**:

- Formulario para agregar cuenta bancaria con:
  _Selector de banco_ (usar mock proporcionado)
  _Tipo de cuenta_ (ahorro/cr√©dito)
  _N√∫mero de cuenta_ (validaci√≥n: solo d√≠gitos)
- Validaci√≥n de campos en tiempo real
- Ver listado de bancos a agregar en mock anexo.

### üü∞ Navegaci√≥n

Implementar un **Bottom Bar** para cambiar entre m√≥dulos principales

### üö® Manejo de errores

### Estrategias a Implementar

1. **Errores generales de los Formularios**:

   - Validaci√≥n en tiempo real para:
     - Formato de email correcto.
     - Nombre sin caracteres especiales ni n√∫meros.
     - Formato de documento de identificaci√≥n acorde a DNI (8 d√≠gitos), CE (9 d√≠gitos), PASAPORTE (de 8 a 15 caracteres)
     - Tel√©fono (9 d√≠gitos)
     - Fecha de nacimiento (Solo registro valido para mayores de edad)
     - N√∫mero de cuenta bancaria solo d√≠gitos.

2. **Errores de API**:

- Considerar errores en servicios como:
  - N√∫mero de documento o celular en uso
  - Error general en la respuesta del servicio.

```typescript
interface APIError {
  success: false;
  data: {
    name: "DUPLICATE_DNI" | "INVALID_PHONE" | "SERVER_ERROR"; // Ejemplos
    title: string;
    message: string;
  };
}
```

## ‚öôÔ∏è Requisitos T√©cnicos

### üõ†Ô∏è Configuraci√≥n

- NativeWind para estilos
- Tipado estricto con TypeScript
- Simulaci√≥n de API usando Axios o React Query.
- Gesti√≥n del estado global usando Context API o Zustand.

### üß© Componentes y vistas

- Reutilizaci√≥n de UI
- Props bien tipadas
- Simulaci√≥n de calculadora de divisas con API de Kambista.
- Navegaci√≥n fluida entre pantallas

### üåê Gesti√≥n de Estado

- Manejo de estado global para:
  - Datos de una transacci√≥n
  - Tasas de cambio

## Simulaci√≥n de la API

1. Endpoint para obtener el tipo de cambio:

```
https://api.kambista.com/v1/exchange/kambista/current
```

2. Endpoint para la calculadora:

```
https://api.kambista.com/v1/exchange/calculates?originCurrency=PEN&destinationCurrency=USD&amount={cantidad}&active=S
```

## Mocks de data adicional

Se incluyen dos archivos JSON con datos de prueba:

1. **`bankAccounts.json`**

   - Listado completo de bancos
   - Uso:
     - Selector de banco al agregar cuenta
     - Elecci√≥n de entidad financiera en operaciones

2. **`sourceFunds.json`**
   - Listado de or√≠genes de fondos
   - Uso:
     - Selector al crear operaciones

> Los archivos se encuentran en `/mocks`.

## üì§ Entrega

### üîó Repositorio Github

1. Hacer fork del repositorio: [frontend-app-challenge](https://github.com/USERNAME/frontend-app-challenge)
2. Clonar el fork:
   ```
   git clone git@github.com:USERNAME/FORKED-PROJECT.git
   ```
3. Crear un nuevo branch con tu nombre:
   ```
   git checkout -b {nombre-apellido}
   ```
4. Realizar commits con mensajes sem√°nticos
5. Documentar en README.md instrucciones de ejecuci√≥n
6. Crear un Pull Request y notificar a talentohumano@kambista.com

### üì¶ APK

Generar y adjuntar un archivo APK usando Expo

## üèÜ Criterios de Evaluaci√≥n

- Calidad de c√≥digo
- Buenas pr√°cticas de programaci√≥n
- Manejo adecuado de errores

## üí° Bonus (Opcional)

- Animaciones
- Agregar en la documentaci√≥n (README.md) las decisiones t√©cnicas relevantes

---

Para cualquier duda o consulta, por favor contactar a talentohumano@kambista.com
````
